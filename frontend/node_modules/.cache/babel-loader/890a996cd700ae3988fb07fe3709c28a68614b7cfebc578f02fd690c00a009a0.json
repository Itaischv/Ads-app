{"ast":null,"code":"import axios from \"axios\";\nconst baseURL = \"http://localhost:3030\";\nexport async function pageLoadEvent() {\n  const res = await axios.post(`${baseURL}/events`, {\n    type: \"Page load\",\n    timestamp: Date.now()\n  });\n  return res;\n}\nexport async function adClickedEvent(e) {\n  e.preventDefault();\n  return await postRequest(`${baseURL}/events`, {\n    type: \"Ad clicked\",\n    timestamp: Date.now(),\n    slot: e.target.id,\n    googleQueryId: e.target.getAttribute(\"data-google-query-id\")\n  });\n}\nexport async function adViewedEvent() {\n  window.googletag.cmd.push(function () {\n    window.googletag.pubads().addEventListener('impressionViewable', async function (e) {\n      // Send event;\n      let data = {\n        type: \"Ad slot viewed\",\n        slot_id: e.slot.getSlotElementId(),\n        timestamp: Date.now()\n      };\n      const res = await axios.post(`${baseURL}/events`, data);\n      return res;\n    });\n  });\n}\nasync function postRequest(url, data) {\n  const res = await axios.post(url, data);\n  console.debug(\"Event: adClickedEvent, Results: \", res.data);\n  return res;\n}","map":{"version":3,"names":["axios","baseURL","pageLoadEvent","res","post","type","timestamp","Date","now","adClickedEvent","e","preventDefault","postRequest","slot","target","id","googleQueryId","getAttribute","adViewedEvent","window","googletag","cmd","push","pubads","addEventListener","data","slot_id","getSlotElementId","url","console","debug"],"sources":["/Users/itaipt/projects/advs-project/src/api/api.js"],"sourcesContent":["import axios from \"axios\";\n\nconst baseURL = \"http://localhost:3030\"\n\nexport async function pageLoadEvent() {\n    const res = await axios.post(`${baseURL}/events`, {\n        type: \"Page load\",\n        timestamp: Date.now()\n    })\n    return res;\n}\n\nexport async function adClickedEvent(e) {\n    e.preventDefault();\n    return await postRequest(`${baseURL}/events`, {\n        type: \"Ad clicked\",\n        timestamp: Date.now(),\n        slot: e.target.id,\n        googleQueryId: e.target.getAttribute(\"data-google-query-id\")\n    })\n}\n\nexport async function adViewedEvent() {\n    window.googletag.cmd.push(function() {\n        window.googletag.pubads().addEventListener('impressionViewable', async function(e) {\n            // Send event;\n            let data = {\n                type: \"Ad slot viewed\",\n                slot_id: e.slot.getSlotElementId(),\n                timestamp: Date.now()\n            }\n            const res = await axios.post(`${baseURL}/events`, data)\n            return res;\n        });\n    });\n}\n\nasync function postRequest(url, data) {\n    const res = await axios.post(url, data);\n    console.debug(\"Event: adClickedEvent, Results: \", res.data)\n    return res;\n}\n\n\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,OAAO,GAAG,uBAAuB;AAEvC,OAAO,eAAeC,aAAaA,CAAA,EAAG;EAClC,MAAMC,GAAG,GAAG,MAAMH,KAAK,CAACI,IAAI,CAAE,GAAEH,OAAQ,SAAQ,EAAE;IAC9CI,IAAI,EAAE,WAAW;IACjBC,SAAS,EAAEC,IAAI,CAACC,GAAG,CAAC;EACxB,CAAC,CAAC;EACF,OAAOL,GAAG;AACd;AAEA,OAAO,eAAeM,cAAcA,CAACC,CAAC,EAAE;EACpCA,CAAC,CAACC,cAAc,CAAC,CAAC;EAClB,OAAO,MAAMC,WAAW,CAAE,GAAEX,OAAQ,SAAQ,EAAE;IAC1CI,IAAI,EAAE,YAAY;IAClBC,SAAS,EAAEC,IAAI,CAACC,GAAG,CAAC,CAAC;IACrBK,IAAI,EAAEH,CAAC,CAACI,MAAM,CAACC,EAAE;IACjBC,aAAa,EAAEN,CAAC,CAACI,MAAM,CAACG,YAAY,CAAC,sBAAsB;EAC/D,CAAC,CAAC;AACN;AAEA,OAAO,eAAeC,aAAaA,CAAA,EAAG;EAClCC,MAAM,CAACC,SAAS,CAACC,GAAG,CAACC,IAAI,CAAC,YAAW;IACjCH,MAAM,CAACC,SAAS,CAACG,MAAM,CAAC,CAAC,CAACC,gBAAgB,CAAC,oBAAoB,EAAE,gBAAed,CAAC,EAAE;MAC/E;MACA,IAAIe,IAAI,GAAG;QACPpB,IAAI,EAAE,gBAAgB;QACtBqB,OAAO,EAAEhB,CAAC,CAACG,IAAI,CAACc,gBAAgB,CAAC,CAAC;QAClCrB,SAAS,EAAEC,IAAI,CAACC,GAAG,CAAC;MACxB,CAAC;MACD,MAAML,GAAG,GAAG,MAAMH,KAAK,CAACI,IAAI,CAAE,GAAEH,OAAQ,SAAQ,EAAEwB,IAAI,CAAC;MACvD,OAAOtB,GAAG;IACd,CAAC,CAAC;EACN,CAAC,CAAC;AACN;AAEA,eAAeS,WAAWA,CAACgB,GAAG,EAAEH,IAAI,EAAE;EAClC,MAAMtB,GAAG,GAAG,MAAMH,KAAK,CAACI,IAAI,CAACwB,GAAG,EAAEH,IAAI,CAAC;EACvCI,OAAO,CAACC,KAAK,CAAC,kCAAkC,EAAE3B,GAAG,CAACsB,IAAI,CAAC;EAC3D,OAAOtB,GAAG;AACd"},"metadata":{},"sourceType":"module","externalDependencies":[]}