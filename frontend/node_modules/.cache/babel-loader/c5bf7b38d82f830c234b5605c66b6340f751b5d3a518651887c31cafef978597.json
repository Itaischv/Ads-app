{"ast":null,"code":"import axios from \"axios\";\nconst baseURL = \"http://localhost:3030\";\nexport async function pageLoadEvent() {\n  return await postRequest(`${baseURL}/events`, {\n    type: \"Page load\",\n    timestamp: Date.now()\n  });\n}\nexport async function adClickedEvent(e) {\n  e.preventDefault();\n  return await postRequest(`${baseURL}/events`, {\n    type: \"Ad clicked\",\n    timestamp: Date.now(),\n    slot: e.target.id,\n    googleQueryId: e.target.getAttribute(\"data-google-query-id\")\n  });\n}\nexport async function adViewedEvent() {\n  window.googletag.cmd.push(function () {\n    window.googletag.pubads().addEventListener('impressionViewable', async function (e) {\n      // Send event;\n      let data = {\n        type: \"Ad slot viewed\",\n        slot_id: e.slot.getSlotElementId(),\n        timestamp: Date.now()\n      };\n      return await postRequest(`${baseURL}/events`, data);\n    });\n  });\n}\nasync function postRequest(url, data) {\n  data.timeOnPage = (Date.now() - window.pageLoadedAt) / 1000; // Time in seconds;\n  const res = await axios.post(url, data);\n  console.debug(\"Event: \", data.type, \" Results: \", res.data);\n  return res;\n}","map":{"version":3,"names":["axios","baseURL","pageLoadEvent","postRequest","type","timestamp","Date","now","adClickedEvent","e","preventDefault","slot","target","id","googleQueryId","getAttribute","adViewedEvent","window","googletag","cmd","push","pubads","addEventListener","data","slot_id","getSlotElementId","url","timeOnPage","pageLoadedAt","res","post","console","debug"],"sources":["/Users/itaipt/projects/advs-project/src/api/api.js"],"sourcesContent":["import axios from \"axios\";\n\nconst baseURL = \"http://localhost:3030\"\n\nexport async function pageLoadEvent() {\n    return await postRequest(`${baseURL}/events`, {\n        type: \"Page load\",\n        timestamp: Date.now()\n    });\n}\n\nexport async function adClickedEvent(e) {\n    e.preventDefault();\n    return await postRequest(`${baseURL}/events`, {\n        type: \"Ad clicked\",\n        timestamp: Date.now(),\n        slot: e.target.id,\n        googleQueryId: e.target.getAttribute(\"data-google-query-id\")\n    });\n}\n\nexport async function adViewedEvent() {\n    window.googletag.cmd.push(function() {\n        window.googletag.pubads().addEventListener('impressionViewable', async function(e) {\n            // Send event;\n            let data = {\n                type: \"Ad slot viewed\",\n                slot_id: e.slot.getSlotElementId(),\n                timestamp: Date.now()\n            }\n            return await postRequest(`${baseURL}/events`, data);\n        });\n    });\n}\n\nasync function postRequest(url, data) {\n    data.timeOnPage = (Date.now() - window.pageLoadedAt) / 1000; // Time in seconds;\n    const res = await axios.post(url, data);\n    console.debug(\"Event: \", data.type, \" Results: \", res.data)\n    return res;\n}\n\n\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,OAAO,GAAG,uBAAuB;AAEvC,OAAO,eAAeC,aAAaA,CAAA,EAAG;EAClC,OAAO,MAAMC,WAAW,CAAE,GAAEF,OAAQ,SAAQ,EAAE;IAC1CG,IAAI,EAAE,WAAW;IACjBC,SAAS,EAAEC,IAAI,CAACC,GAAG,CAAC;EACxB,CAAC,CAAC;AACN;AAEA,OAAO,eAAeC,cAAcA,CAACC,CAAC,EAAE;EACpCA,CAAC,CAACC,cAAc,CAAC,CAAC;EAClB,OAAO,MAAMP,WAAW,CAAE,GAAEF,OAAQ,SAAQ,EAAE;IAC1CG,IAAI,EAAE,YAAY;IAClBC,SAAS,EAAEC,IAAI,CAACC,GAAG,CAAC,CAAC;IACrBI,IAAI,EAAEF,CAAC,CAACG,MAAM,CAACC,EAAE;IACjBC,aAAa,EAAEL,CAAC,CAACG,MAAM,CAACG,YAAY,CAAC,sBAAsB;EAC/D,CAAC,CAAC;AACN;AAEA,OAAO,eAAeC,aAAaA,CAAA,EAAG;EAClCC,MAAM,CAACC,SAAS,CAACC,GAAG,CAACC,IAAI,CAAC,YAAW;IACjCH,MAAM,CAACC,SAAS,CAACG,MAAM,CAAC,CAAC,CAACC,gBAAgB,CAAC,oBAAoB,EAAE,gBAAeb,CAAC,EAAE;MAC/E;MACA,IAAIc,IAAI,GAAG;QACPnB,IAAI,EAAE,gBAAgB;QACtBoB,OAAO,EAAEf,CAAC,CAACE,IAAI,CAACc,gBAAgB,CAAC,CAAC;QAClCpB,SAAS,EAAEC,IAAI,CAACC,GAAG,CAAC;MACxB,CAAC;MACD,OAAO,MAAMJ,WAAW,CAAE,GAAEF,OAAQ,SAAQ,EAAEsB,IAAI,CAAC;IACvD,CAAC,CAAC;EACN,CAAC,CAAC;AACN;AAEA,eAAepB,WAAWA,CAACuB,GAAG,EAAEH,IAAI,EAAE;EAClCA,IAAI,CAACI,UAAU,GAAG,CAACrB,IAAI,CAACC,GAAG,CAAC,CAAC,GAAGU,MAAM,CAACW,YAAY,IAAI,IAAI,CAAC,CAAC;EAC7D,MAAMC,GAAG,GAAG,MAAM7B,KAAK,CAAC8B,IAAI,CAACJ,GAAG,EAAEH,IAAI,CAAC;EACvCQ,OAAO,CAACC,KAAK,CAAC,SAAS,EAAET,IAAI,CAACnB,IAAI,EAAE,YAAY,EAAEyB,GAAG,CAACN,IAAI,CAAC;EAC3D,OAAOM,GAAG;AACd"},"metadata":{},"sourceType":"module","externalDependencies":[]}